!function($){function e(){$("#cod-fee-enabled").is(":checked")?$(".scffw-settings").slideDown():$(".scffw-settings").slideUp(),$("#cod-conditionals").is(":checked")?$(".disable-cod-settings").slideDown():$(".disable-cod-settings").slideUp(),$("#cod-fee-conditionals").is(":checked")?$(".disable-cod-fee-settings").slideDown():$(".disable-cod-fee-settings").slideUp(),$("#enable-tax").is(":checked")?$("#select-tax-rates").slideDown():$("#select-tax-rates").slideUp(),$("#cart-percent-enabled").is(":checked")?$(".cart-percentage").slideDown():$(".cart-percentage").slideUp(),$("#different-cod-per-shipping").is(":checked")?($(".different-fees").slideDown(),$(".universal-fee").slideUp()):($(".different-fees").slideUp(),$(".universal-fee").slideDown()),$("#use-exchange-rates").is(":checked")?($(".currencies-flex .extra-fee-cost-cell input:not(.main-currency-fee)").attr("readonly",!0),$.each($(".cod-fee-input:not(.main-currency-fee)"),(function(e,t){var n=$(".cod-fee-input.main-currency-fee").val()*$(t).data("exchange-rate");$(t).val(n.toFixed(2))})),$.each($(".extra-fee-cost-cell input:not(.main-currency-fee)"),(function(e,t){var n=$(t).parents(".currencies-flex").find(".main-currency-fee").val()*$(t).data("exchange-rate");$(t).val(n.toFixed(2))}))):$(".currencies-flex .extra-fee-cost-cell input").attr("readonly",!1)}$(document).on("change keyup paste",".scffw-validate-price-format, .scffw-percentage-input",(function(e){var t=$(this).val();if(((t=t.replace(/,/g,".")).match(/\./g)||[]).length>1){var n=t.lastIndexOf(".");t=t.slice(0,n)+t.slice(n+1)}/^[0-9]+(\.[0-9]*)?$/.test(t)||(t=t.replace(/[^0-9.]/g,"")),$(this).val(t)})).on("blur",".scffw-validate-price-format, .scffw-percentage-input",(function(e){var t=$(this).val(),n=t.split("."),s=n[1];void 0===s?s="00":s.length>2?s=s.substring(0,2):s.length<2&&(s+="0"),t=(n[0]||"0")+"."+s,$(this).val(t)})),$(".js-save-scffw-settings-btn").length&&$(document).on("click",".js-save-scffw-settings-btn",(function(e){e.preventDefault();var t={};t.enabled=$("#cod-fee-enabled").is(":checked"),t.fee_title=$("#fee-title").val(),t.show_on_cart=$("#show-on-cart").is(":checked"),t.cod_conditionals=$("#cod-conditionals").is(":checked"),t.cod_disable_min=$("#disable-cod-min").val(),t.cod_disable_max=$("#disable-cod-max").val(),t.cod_fee_conditionals=$("#cod-fee-conditionals").is(":checked"),t.exchange_rates_enabled=$("#use-exchange-rates").is(":checked"),t.cod_fee_disable_min=$("#disable-cod-fee-min").val(),t.cod_fee_disable_max=$("#disable-cod-fee-max").val(),t.cart_percent_enabled=$("#cart-percent-enabled").is(":checked"),t.enable_tax=$("#enable-tax").is(":checked"),t.different_fees_per_shipping_method_enabled=$("#different-cod-per-shipping").is(":checked"),t.shipping_methods_fees={},t.shipping_methods_cart_percents={},t.tax_rate=$("#tax-rates option:selected").val(),t.updated_to_v_2_settings_saved=!0,$(".cod-fee-input").length&&$.each($(".cod-fee-input"),(function(e,n){var s=$(n).attr("name");t[s]=$(n).val()})),$(".zone-shipping-method-fee").length&&$.each($(".zone-shipping-method-fee"),(function(e,n){t.shipping_methods_fees[$(n).attr("name")]=$(n).val()})),$(".scffw-percentage-input").length&&$.each($(".scffw-percentage-input"),(function(e,n){t.shipping_methods_cart_percents[$(n).attr("name")]=$(n).val()})),function(e){return $.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"scffw_save_settings",fields:e},beforeSend:function(){$(".js-save-scffw-settings-btn").attr("disabled",!0)}})}(t).done((function(e){$(".js-save-scffw-settings-btn").attr("disabled",!1),$(".success-message").addClass("is-active"),$(".scffw-update-notice").length&&$(".scffw-update-notice").fadeOut(),setTimeout((function(){$(".success-message").removeClass("is-active")}),1600)}))})),$(document).on("click keyup change paste",".scffw-user-option",(function(t){e()})),e(),$(".wc-cod-settings").length&&$(".wc-cod-settings").find(".form-table").after('<div class="scffw-simple-cod-settings-wrapper"><a href="'+main_vars.simple_cod_settings_btn_url+'" class="scffw-simple-cod-settings-btn">'+main_vars.simple_cod_settings_btn_text+"</a></div>"),$(document).on("click",".floating-label .label",(function(e){e.preventDefault(),$(this).parents(".floating-label").find("input").focus()}))}(jQuery);